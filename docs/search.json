[
  {
    "objectID": "blog.html",
    "href": "blog.html",
    "title": "Blog",
    "section": "",
    "text": "KT Villa Overview\n\n\n\n\n\nHow I ended up building a booking website with too much Generative AI\n\n\n\n\n\n\nNov 30, 2023\n\n\nKeith Stevens\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Open Source Musings & Snow Time",
    "section": "",
    "text": "Welcome! Here’s where I write thoughts on various open source Large Language Model projects and random things I’m doing. I’m a former Staff Software Engineer from Google Translate and until I make it back the states, I’m spending some time exploring the world of smaller teams and companies. I sometimes take on contractor work related to LLMs. During winter, I spend a lot of time skiing in Hakuba Japan (if you find yourself there, say hello and I can show you around)."
  },
  {
    "objectID": "index.html#recent-posts",
    "href": "index.html#recent-posts",
    "title": "Open Source Musings & Snow Time",
    "section": "Recent Posts",
    "text": "Recent Posts\n\n\n\n\n  \n\n\n\n\nKT Villa Overview\n\n\n\n\n\nHow I ended up building a booking website with too much Generative AI\n\n\n\n\n\n\nNov 30, 2023\n\n\nKeith Stevens\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html#upcoming-reviews",
    "href": "index.html#upcoming-reviews",
    "title": "Open Source Musings & Snow Time",
    "section": "Upcoming Reviews",
    "text": "Upcoming Reviews\n\nMaking KT-Villa with FastChat, LLaVa & RedwoodJS:\n\nA basic overview\nGluing Stable Diffusion and Llava together\nPiping in Zephyr-7b\nWhy the rest of the project was still hard\n\nEvaluate some interesting projects:\n\nModelFusion\nllama-cpp-python\nxorbitsai/inference\nLilac\n\nTry out some more models:\n\nteknium/OpenHermes-2.5-Mistral-7B\nteknium/Mistral-Trismegistus-7B\nliuhaotian/llava-v1.5-7b"
  },
  {
    "objectID": "posts/kt-villa-overview/index.html",
    "href": "posts/kt-villa-overview/index.html",
    "title": "KT Villa Overview",
    "section": "",
    "text": "KT Villa is a nifty little booking website I hand built to manage trips to my winter lodge in Hakuba Japan. For entirely silly reasons I infused it with way more Generative AI than needed. Why? Well it all starts with little Meiji Chocolates in Japan where each tube comes with some delightful little sticker representing a country somewhere in the world. I’ve been collecting these over the years and thought it would be fun to do the same thing with bar soap, each purchase comes with a little trading card that has an AI generated image and an AI generated character profile. Like NFTs, people could “claim” them on a website but unlike NFTs they’re intentionally worthless. Seems pretty doable but it requires a soap company selling real products, which I aspire to have one day but currently do not (message me if you’re keen to do something silly like this plz).\n\n\n\n\n\nI do however have an empty winter lodge in Hakuba Japan, a prime place to enjoy the snow. And I have many friends who wish to stay there on the regular. So instead of generated images and character cards for soap purchases, I did the same thing for trips to my winter lodge. And bam, that’s how we get KT Villa. As a fun aside, the Villa part comes from a previous name for our house, Chill Villa, when it was on AirBnB and the KT part comes from nicknames for my wife and myself, Koala and Tree. Cute right?\n\nPretty much all the hard part of the site is just your regular old booking website challenges. Managing users, managing booking details, making sure two trips don’t overlap, making sure timezones are all done right. Making it look visually okay. It’s an entirely normal website except when you make a booking, you get a SDXL (Stable Diffusion XL from Stability AI) generated image. To boot, I setup SDXL to run a different themed LoRA adapter every two weeks so with a bit of prompt magic and adapter swapping, every trip will generate a fairly unique image.\n\nBut I wanted something even sillier. Since I’ve been contracting with a team focusing on themed chatbots, I wanted to take it to the extreme. For every generated imaged, I let users create a character profile card using a multi-modal LLM. That gives us a pretty unpredictable chatbot profile and when paired with a decent small chat trained LLM, users can try chatting with their booking image and see what silliness entails. With time I also plan to somehow cram in Retrieval Augmented Generation somewhere using LangChain.\n\nI honestly doubt any of this is really useful, but it felt like a fun way to try blending together real services and products with a little bit of AI flair, predominantly for the purpose of zaney entertainment. And with the state of things today, it was pretty easy to do even with entirely self hosted models. Let’s find out just how easy."
  },
  {
    "objectID": "posts/kt-villa-overview/index.html#the-origins-for-kt-villa",
    "href": "posts/kt-villa-overview/index.html#the-origins-for-kt-villa",
    "title": "KT Villa Overview",
    "section": "",
    "text": "KT Villa is a nifty little booking website I hand built to manage trips to my winter lodge in Hakuba Japan. For entirely silly reasons I infused it with way more Generative AI than needed. Why? Well it all starts with little Meiji Chocolates in Japan where each tube comes with some delightful little sticker representing a country somewhere in the world. I’ve been collecting these over the years and thought it would be fun to do the same thing with bar soap, each purchase comes with a little trading card that has an AI generated image and an AI generated character profile. Like NFTs, people could “claim” them on a website but unlike NFTs they’re intentionally worthless. Seems pretty doable but it requires a soap company selling real products, which I aspire to have one day but currently do not (message me if you’re keen to do something silly like this plz).\n\n\n\n\n\nI do however have an empty winter lodge in Hakuba Japan, a prime place to enjoy the snow. And I have many friends who wish to stay there on the regular. So instead of generated images and character cards for soap purchases, I did the same thing for trips to my winter lodge. And bam, that’s how we get KT Villa. As a fun aside, the Villa part comes from a previous name for our house, Chill Villa, when it was on AirBnB and the KT part comes from nicknames for my wife and myself, Koala and Tree. Cute right?\n\nPretty much all the hard part of the site is just your regular old booking website challenges. Managing users, managing booking details, making sure two trips don’t overlap, making sure timezones are all done right. Making it look visually okay. It’s an entirely normal website except when you make a booking, you get a SDXL (Stable Diffusion XL from Stability AI) generated image. To boot, I setup SDXL to run a different themed LoRA adapter every two weeks so with a bit of prompt magic and adapter swapping, every trip will generate a fairly unique image.\n\nBut I wanted something even sillier. Since I’ve been contracting with a team focusing on themed chatbots, I wanted to take it to the extreme. For every generated imaged, I let users create a character profile card using a multi-modal LLM. That gives us a pretty unpredictable chatbot profile and when paired with a decent small chat trained LLM, users can try chatting with their booking image and see what silliness entails. With time I also plan to somehow cram in Retrieval Augmented Generation somewhere using LangChain.\n\nI honestly doubt any of this is really useful, but it felt like a fun way to try blending together real services and products with a little bit of AI flair, predominantly for the purpose of zaney entertainment. And with the state of things today, it was pretty easy to do even with entirely self hosted models. Let’s find out just how easy."
  },
  {
    "objectID": "posts/kt-villa-overview/index.html#the-tech-stack",
    "href": "posts/kt-villa-overview/index.html#the-tech-stack",
    "title": "KT Villa Overview",
    "section": "The Tech Stack",
    "text": "The Tech Stack\n\n\n\n\nflowchart LR\n  React[React JS]\n  Fastify[Fastify Server]\n  Postgres[Postgres Database]\n  SurfaceChat[Surface Chat FastAPI]\n  LLaVa(LLaVa LLM)\n  SDXL(SDXL + LoRAs)\n  Zephyr(Zephyr 7B Beta)\n  FastChat[FastChat FastAPI]\n\n  subgraph RedwoodJS\n    React --&gt; Fastify\n    Fastify --&gt; Postgres\n  end\n\n  subgraph Custom FastAPI Python Server \n    Fastify --&gt; SurfaceChat\n    SurfaceChat --&gt; LLaVa\n    SurfaceChat --&gt; SDXL\n  end\n\n  subgraph Standard FastChat Python Server\n    Fastify --&gt; FastChat\n    FastChat --&gt; Zephyr\n  end\n\n\n\n\n\nWhen building this, I wanted to keep to a fairly standard tech stack that let me easily separate out potentially re-usable parts from all the booking-specific parts. I also wanted to leverage tools I was already pretty familiar with since this is mostly to simplify managing my winter lodge and only partially for fun. That led to a few key decisions, RedwoodJS for the primary client side experience, Postgres for all database stuff, FastAPI for any custom LLM servers, and ready to go server like FastChat for whatever could fit in it.\nThat’s how we got to this horrible monstrosity with three docker images and way too many containers running on my single NVIDIA RTX A6000 powered server. But with the absurd fleet of containers and some simple docker compose scripts, its actually pretty simple.\nIf you haven’t tried it yet, RedwoodJS is a wrapper around a ReactJS client side experience and a Fastify backend Node.JS server. It pairs well with a database like Postgres and does a bunch of GraphQL magic that I don’t like thinking about. I find it a lot easier to get started than something like Next.JS since Redwood doesn’t have any weird blending between client side and server side behavior and just templates out the annoying parts. If you like something straight forward, I very much recommend RedwoodJS. And pair it with Daisy UI for styling everything and you can pretty quickly get a nice looking hand crafted website.\nFor all the image related components, both generating images and turning images into character profiles, I hacked together a very lightweight FastAPI python server that I call Surface Chat. Its pretty much me glueing together various transformers API tutorials so that I can run a baseline SDXL model and swap in a bunch of different LoRA adapters on demand. Crammed in is LLaVA for multi-modal models mostly because I didn’t know of any open source framework that supported this with a standard format, but with OpenAI’s releases that will likely change soon.\nFinally, for the chat portion and other random places I might need pure a generative text model, I spun up FastChat with a single Zephyr 7B Beta model. FastChat has their own suite of tools for training but I primarily wanted their nice split framework so I can scale the heavy GPU portion easily and it’s support for various serving methods. And there’s probably newer options for this step but I haven’t investigated them yet. That is somewhere in my future."
  },
  {
    "objectID": "posts/kt-villa-overview/index.html#what-next",
    "href": "posts/kt-villa-overview/index.html#what-next",
    "title": "KT Villa Overview",
    "section": "What Next",
    "text": "What Next\nWhew that was a lot. This was really a whirlwind summary of what KT Villa is all about, why I made it, and a light sketch of what went into it. Up next I want to go into more detail about what’s happening inside SurfaceChat and generally what I like and don’t like about FastChat. Lastly I’ll go in depth through the RedwoodJS server and show where all the generative AI steps tie in and demonstrate how straightforward it can be with this kind of separation. Expect those in coming weeks.\nP.S. If you want to make a cute website like this, take @HamelHusain’s advice and look at Quarto. I used to use Jekyll and this is so so much better."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Keith Stevens",
    "section": "",
    "text": "With 20 years practicing Buddhism and 15 years working in Natural Language Processing, I firmly believe language technology works best when it helps people live economically better lives so they can spend more time building and enjoying the human relationships that give life meaning. More so, the best solutions come from teams that focus deeply on a poignant market problem and solve it with relentless focus. And that’s what I hope to keep doing.\nOver 9 years I worked with the google translate team as we did exactly that for machine translation. We got to live through the paradigm shift from old school statistical NLP to large transformer models, being one of the first teams in Google to productionize transformer models. With my direct teams we built systems that discovered, curated, and housed the vast pools of data needed to train these models. And with a small team I personally led we build out user facing features that let users share data and insights with us.\nSince leaving Google I spent the last two years seeing the startup world up close. I tried replicating some of my Google work as an open source project. Partnered with a co-founder to try making an emotional intelligence oriented AI startup. I’ve since been working with several startups to build out their LLM infused products. Until mid 2024, I plan to continue doing this will splitting my time between Tokyo and Hakuba Japan. In my spare time I’ll also be skiing and writing mini reports on various LLM adjacent open source projects that catch my interest.\nAfter the middle of 2024, I expect to relocate from Japan to either the SF Bay Area or Los Angeles while my wife studies for her MBA. While in the states, I hope to find a solid team to join more permanently to make sure LLMs are useful. If that’s you, let me know."
  }
]